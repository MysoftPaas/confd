webpackJsonp([1,0],[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var s=n(5),a=i(s),o=n(23),r=i(o);n(15);var l=n(4),c=i(l),u=n(7),d=n(35),h=i(d),f=n(1),p=i(f);a.default.use(c.default),a.default.use(h.default),a.default.http.options.emulateJSON=!0,a.default.http.headers.common.Authorization="Bearer "+p.default.getToken(),new a.default({router:u.router,http:{root:"/"},template:"<App/>",components:{App:r.default}}).$mount("#app")},function(t,e,n){"use strict";function i(t,e,n){s.http.post("/api/login",{username:t,password:e},function(t){n(t.data.result?{authenticated:!0,token:t.data.token}:{authenticated:!1})})}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2);e.default={login:function(t,e,n){var s=this;return n=arguments[arguments.length-1],localStorage.token?(n&&n(!0),void this.onChange(!0)):void i(t,e,function(t){t.authenticated?(localStorage.token=t.token,n&&n(!0),s.onChange(!0)):(n&&n(!1),s.onChange(!1))})},getToken:function(){return localStorage.token},logout:function(t){delete localStorage.token,t&&t(),this.onChange(!1)},loggedIn:function(){return!!localStorage.token},onChange:function(){}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(t){console.log(t)}Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.ui=e.http=void 0;var a=n(5),o=i(a),r={getQuery:function(t,e){e||(e=window.location.href),t=t.replace(/[[]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}},l={alert:function(t,e,n){swal(t,e,n)},confirm:function(t,e,n){swal({title:t,text:e,type:"warning",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0},function(){n()})},prompt:function(t,e,n,i){swal({title:t,text:e,type:"input",showCancelButton:!0,closeOnConfirm:!1,inputPlaceholder:"Write something"},function(t){return t!==!1&&(""===t?(swal.showInputError("You need to write something!"),!1):void i(t))})}},c={getQuery:function(t,e){e||(e=window.location.href),t=t.replace(/[[]]/g,"\\$&");var n=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null},post:function(t,e,n,i){o.default.http.post(t,e).then(function(t){n(t)},function(t){i&&i(t),s(t)})},delete:function(t,e,n){o.default.http.delete(t).then(function(t){e(t)},function(t){n&&n(t),s(t)})},get:function(t,e,n){o.default.http.get(t).then(function(t){e(t)},function(t){n&&n(t),s(t)})}};e.http=c,e.ui=l,e.utils=r},function(t,e,n){var i,s;n(19),i=n(14);var a=n(33);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=i},,,function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(21),e.default={handleShow:function(){},handleHide:function(){},bind:function(t,e,n){},update:function(t,e,n){console.log("---- update ----")}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e,n){l.default.loggedIn()?n():n({path:"/login",query:{redirect:t.fullPath}})}Object.defineProperty(e,"__esModule",{value:!0}),e.router=void 0;var a=n(4),o=i(a),r=n(1),l=i(r),c=n(27),u=i(c),d=n(25),h=i(d),f=n(26),p=i(f),_=n(22),m=i(_),g=n(24),v=i(g),C=new o.default({mode:"history",routes:[{path:"/",component:h.default,meta:{title:"home"}},{path:"/about",component:m.default,meta:{title:"about"}},{path:"/login",component:p.default},{path:"/dashboard",component:v.default,beforeEnter:s},{path:"/project/:name",component:u.default,beforeEnter:s},{path:"/logout",beforeEnter:function(t,e,n){l.default.logout(),n("/")}}]});e.router=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(6),a=i(s);e.default={directives:{loading:a.default},data:function(){return{isLoading:!1}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),a=i(s);e.default={data:function(){return{loggedIn:a.default.loggedIn()}},created:function(){var t=this;a.default.onChange=function(e){t.loggedIn=e}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),a=n(3),o=i(a);e.default={name:"Dashboard",components:{Spinner:o.default},data:function(){return{selectedIndex:-1,selectedProject:null,loading:!1,error:null,projects:[]}},methods:{fetchData:function(){var t=this;t.loading=!0,s.http.get("/api/projects",function(e){t.loading=!1,e.data.result===!1?t.error=e.data.msg:t.projects=e.data})},select:function(t,e,n){var i=this;i.loading=!0,this.selectedIndex=e,this.selectedProject={project:n,resources:[]},s.http.get("api/project/"+n.Name,function(t){i.loading=!1,i.selectedProject.resources=t.data.resources})},isSelected:function(t){return this.selectedIndex===t}},watch:{$route:"fetchData"},created:function(){this.fetchData()}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"home",data:function(){return{msg:"Welcome to Your Vue.js App"}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(1),a=i(s);e.default={data:function(){return{username:"",password:"",error:!1}},methods:{login:function(){var t=this;a.default.login(this.username,this.password,function(e){e?t.$router.replace(t.$route.query.redirect||"/"):t.error=!0})}}}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),a=n(3),o=i(a);e.default={name:"project",components:{Spinner:o.default},data:function(){return{submit:!1,startSet:!1,startDelete:!1,startExecute:!1,loggingVisiable:!1,items:[],input:{key:"",value:""},selectedIndex:-1,info:null,loading:!1,name:this.$route.params.name,loggingBody:""}},methods:{fetchData:function(){var t=this;t.loading=!0,s.http.get("/api/project/"+t.name,function(e){t.info={project:e.data.project,resources:[]}}),s.http.get("/api/project/"+t.name+"/items",function(e){t.loading=!1,t.items=e.data})},select:function(t,e,n){this.input.key=e,this.input.value=n},isSelected:function(t){return this.input.key===t},upset:function(){var t=this;this.submit=!0,t.input.key&&(this.startSet=!0,s.http.post("/api/project/"+t.name+"/items",{key:t.input.key,value:t.input.value},function(e){t.startSet=!1,e.data.result?(t.items[t.input.key]=t.input.value,s.ui.alert("成功","设置成功","success")):s.ui.alert("失败",e.data.msg,"error")}))},remove:function(){this.submit=!0;var t=this;if(t.input.key){var e=t.input.key;s.ui.confirm("delete","delete "+e+"?",function(){var n=s.utils.getQuery("name"),i=encodeURIComponent(e);s.http.delete("/api/project/"+n+"/item/"+i,function(n){n.data.result?(t.items[e]="",s.ui.alert("成功","删除成功","success")):s.ui.alert("失败",n.data.msg,"error")})})}},execute:function(){var t=this;s.http.post("/api/exec",{projectName:t.name},function(t){t.data.result?s.ui.alert("成功","执行成功","success"):s.ui.alert("失败",t.data.msg,"error")})},hideLog:function(){this.loggingVisiable=!this.loggingVisiable},cleanLog:function(){this.loggingBody=""},log:function(t){this.loggingBody+=t+"\n"},viewLog:function(){ws.Emit("log","history")}},watch:{$route:"fetchData"},created:function(){null==this.info&&this.fetchData();var t=this,e=window.location.host,n=new Ws("ws://"+e+"/log");n.OnConnect(function(){t.loggingBody="Websocket connection enstablished."}),n.OnDisconnect(function(){t.loggingBody="Websocket disconnection."}),n.On("log",function(e){t.loggingBody+=e+"</br>\r\n"})}}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:["show"]}},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e){},function(t,e,n){var i,s;n(16),i=n(8);var a=n(28);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=i},function(t,e,n){var i,s;n(20),i=n(9);var a=n(34);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=i},function(t,e,n){var i,s;n(17),i=n(10);var a=n(29);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=i},function(t,e,n){var i,s;i=n(11);var a=n(32);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=i},function(t,e,n){var i,s;i=n(12);var a=n(30);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=i},function(t,e,n){var i,s;n(18),i=n(13);var a=n(31);s=i=i||{},"object"!=typeof i.default&&"function"!=typeof i.default||(s=i=i.default),"function"==typeof s&&(s=s.options),s.render=a.render,s.staticRenderFns=a.staticRenderFns,t.exports=i},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"container"},[_h("div",{directives:[{name:"loading",rawName:"v-loading",value:isLoading,expression:"isLoading"}],staticClass:"box is-primary"},[_m(0)])," ",_h("button",{on:{click:function(t){isLoading=!0}}},["load"])])},staticRenderFns:[function(){with(this)return _h("ul",[_h("li",["one"])," ",_h("li",["two"])])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"container "},[_m(0)," ",_h("spinner",{attrs:{show:loading}})," ",_h("div",{staticClass:"columns"},[_h("div",{staticClass:"column is-half"},[_l(projects,function(t,e){return _h("div",{staticClass:"box",class:{selected:isSelected(e)},attrs:{id:"box-"+t.Name}},[_h("article",{staticClass:"media"},[_m(1,!0)," ",_h("div",{staticClass:"media-content"},[_h("div",{staticClass:"content"},[_h("p",[_h("strong",[_s(t.Name)])," ",_h("small",["Prefix: "+_s(t.Prefix)])])])," ",_h("nav",{staticClass:"level"},[_h("div",{staticClass:"level-left"},[_h("a",{staticClass:"level-item",class:{white:isSelected(e)},attrs:{style:"float:right!important;"},on:{click:function(n){n.stopPropagation(),n.preventDefault(),select(n,e,t)}}},[_m(2,!0)])," ",_h("router-link",{staticClass:"level-item",class:{white:isSelected(e)},attrs:{to:"/project/"+t.Name},on:{click:function(n){n.stopPropagation(),n.preventDefault(),select(n,e,t)}}},[_m(3,!0)])])])])])])})])," ",_h("div",{staticClass:"column is-half"},[selectedProject?_h("div",[_h("h3",{staticClass:"title is-3"},[_s(selectedProject.project.Name)])," ",_h("table",{staticClass:"table"},[_h("tbody",[_h("tr",[_m(4)," ",_h("td",[_s(selectedProject.project.Prefix)])])," ",_h("tr",[_m(5)," ",_h("td",[_s(selectedProject.project.ConfDir)])])])])," ",_m(6)," ",_l(selectedProject.resources,function(t){return _h("table",{staticClass:"table"},[_h("tbody",[_h("tr",[_m(7,!0)," ",_h("td",[_s(t.Prefix)])])," ",_m(8,!0),_h("tr",[_m(9,!0)," ",_h("td",[_s(t.Src)])])," ",_h("tr",[_m(10,!0)," ",_h("td",[_s(t.Dest)])])," ",_h("tr",[_m(11,!0)," ",_h("td",[_h("ul",[_l(t.Keys,function(t){return _h("li",{staticClass:"row-line"},[_s(t)])})])])])])])})]):_e()])])])},staticRenderFns:[function(){with(this)return _h("h1",{staticClass:"title is-3"},["\n    Project List\n  "])},function(){with(this)return _h("div",{staticClass:"media-left"})},function(){with(this)return _h("span",{staticClass:"icon"},[_h("i",{staticClass:"fa fa-chevron-circle-right"})])},function(){with(this)return _h("span",{staticClass:"icon"},[_h("i",{staticClass:"fa fa-edit"})])},function(){with(this)return _h("td",{staticClass:"tag label"},["prefix"])},function(){with(this)return _h("td",{staticClass:"tag label"},["confDir"])},function(){with(this)return _h("h3",{staticClass:"title is-5",attrs:{style:"margin-top: 20px;"}},["Resources"])},function(){with(this)return _h("td",{staticClass:"tag label"},["confDir"])},function(){with(this)return _h("tr")},function(){with(this)return _h("td",{staticClass:"tag label"},["src"])},function(){with(this)return _h("td",{staticClass:"tag label"},["dest"])},function(){with(this)return _h("td",{staticClass:"tag label"},["keys"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("form",{staticClass:"container is-fluid",on:{submit:function(t){t.preventDefault(),login(t)}}},[$route.query.redirect?_h("h1",{staticClass:"title is-3"},["You need to login first."]):_e()," ",_m(0)," ",_h("p",{staticClass:"control"},[_h("input",{directives:[{name:"model",rawName:"v-model",value:username,expression:"username"}],staticClass:"input",attrs:{type:"text",placeholder:"username"},domProps:{value:_s(username)},on:{input:function(t){t.target.composing||(username=t.target.value)}}})])," ",_m(1)," ",_h("p",{staticClass:"control has-icon has-icon-right"},[_h("input",{directives:[{name:"model",rawName:"v-model",value:password,expression:"password"}],staticClass:"input",attrs:{type:"password",placeholder:"password"},domProps:{value:_s(password)},on:{input:function(t){t.target.composing||(password=t.target.value)}}})])," ",_h("p",{staticClass:"control"},[_m(2)," ",error?_h("span",{staticClass:"help is-danger"},["Login failed."]):_e()])])},staticRenderFns:[function(){with(this)return _h("label",{staticClass:"label"},["username"])},function(){with(this)return _h("label",{staticClass:"label"},["password"])},function(){with(this)return _h("button",{staticClass:"button is-primary",attrs:{type:"submit"}},["login"])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("div",{staticClass:"container"},[_h("spinner",{attrs:{show:loading}})," ",info?_h("h1",{staticClass:"title is-3"},["\n    "+_s(info.project.Name)+"\n  "]):_e()," ",info?_h("table",{staticClass:"table"},[_h("tbody",[_h("tr",[_m(0)," ",_h("td",[_s(info.project.Prefix)])])," ",_h("tr",[_m(1)," ",_h("td",[_s(info.project.ConfDir)])])])]):_e()," ",_h("div",{staticClass:"columns"},[_h("div",{staticClass:"column is-one-third"},[_m(2)," ",_h("p",{staticClass:"control"},[_h("input",{directives:[{name:"model",rawName:"v-model",value:input.key,expression:"input.key"}],staticClass:"input",class:{"is-danger":!input.key&&submit},attrs:{type:"text",placeholder:"key",required:""},domProps:{value:_s(input.key)},on:{input:function(t){t.target.composing||(input.key=t.target.value)}}})])])," ",_h("div",{staticClass:"column is-two-third"},[_m(3)," ",_h("p",{staticClass:"control"},[_h("textarea",{directives:[{name:"model",rawName:"v-model",value:input.value,expression:"input.value"}],staticClass:"input",attrs:{rows:"1",placeholder:"value",required:""},domProps:{value:_s(input.value)},on:{input:function(t){t.target.composing||(input.value=t.target.value)}}})])])])," ",_h("div",{staticClass:"columns"},[_h("div",{staticClass:"column is-one-third"},[_h("button",{staticClass:"button is-fullwidth is-primary",class:{"is-loading":startSet},on:{click:function(t){upset()}}},["SET"])])," ",_h("div",{staticClass:"column is-one-third"},[_h("button",{staticClass:"button is-fullwidth is-dark",on:{click:function(t){execute()}}},["EXECUTE"])])," ",_h("div",{staticClass:"column is-one-third"},[_h("button",{staticClass:"button is-fullwidth",on:{click:function(t){remove()}}},["DELETE"])])])," ",_h("div",[_h("article",{staticClass:"message"},[_h("div",{staticClass:"message-header"},[_h("nav",{staticClass:"level log-tools"},[_h("div",{staticClass:"level-left"},[_h("a",{staticClass:"level-item",attrs:{href:"javascript:void(0);"},on:{click:function(t){hideLog()}}},[_h("span",{staticClass:"icon is-small"},[_h("i",{class:["fa",loggingVisiable?"fa-angle-double-up":"fa-angle-double-down"]})])])," ",_h("a",{staticClass:"level-item",attrs:{href:"javascript:void(0);"},on:{click:function(t){cleanLog()}}},[_m(4)])])]),"\n      Logging Screen\n    "])," ",loggingVisiable?_h("div",{staticClass:"message-body",attrs:{id:"loggingBody"},domProps:{innerHTML:_s(loggingBody)}}):_e()])," ",_h("table",{staticClass:"table is-bordered"},[_m(5)," ",_h("tbody",[_l(items,function(t,e){return _h("tr",{staticClass:"green",class:{actived:isSelected(e)},attrs:{id:"row-"+e},on:{click:function(n){select(n,e,t)}}},[_h("td",[_s(e)])," ",_h("td",[_s(t)])])})])])])])},staticRenderFns:[function(){with(this)return _h("td",{staticClass:"tag label"},["prefix"])},function(){with(this)return _h("td",{staticClass:"tag label"},["confDir"])},function(){with(this)return _h("label",{staticClass:"label"},["Key"])},function(){with(this)return _h("label",{staticClass:"label"},["Value"])},function(){with(this)return _h("span",{staticClass:"icon is-small"},[_h("i",{staticClass:"fa fa fa-ban"})])},function(){with(this)return _h("thead",[_h("tr",[_h("th",{attrs:{style:"width:33%"}},["key"])," ",_h("th",{attrs:{style:"width:67%"}},["value"])])])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("section",{staticClass:"hero is-primary"},[_h("div",{staticClass:"hero-body"},[_h("div",{staticClass:"container"},[_m(0)," ",_h("h2",{staticClass:"subtitle"},[_h("router-link",{staticClass:"nav-item",attrs:{to:"/dashboard"}},["Start"])])])])])},staticRenderFns:[function(){with(this)return _h("h1",{staticClass:"title"},["\n        Confd Admin\n      "])}]}},function(module,exports){module.exports={render:function(){with(this)return _h("svg",{staticClass:"spinner",class:{show:show},attrs:{width:"44px",height:"44px",viewBox:"0 0 44 44"}},[_h("circle",{staticClass:"path",attrs:{fill:"none","stroke-width":"4","stroke-linecap":"round",cx:"22",cy:"22",r:"20"}})])},staticRenderFns:[]}},function(module,exports){module.exports={render:function(){with(this)return _h("section",{staticClass:"hero is-fluid is-light"},[_h("div",{staticClass:"hero-head"},[_h("header",{staticClass:"nav"},[_h("div",{staticClass:"container"},[_h("div",{staticClass:"nav-left"},[_h("router-link",{staticClass:"nav-item",attrs:{to:"/"}},["\n            confd admin\n          "])])," ",_h("div",{staticClass:"nav-right nav-menu"},[_h("router-link",{staticClass:"nav-item",attrs:{to:"/dashboard"}},["\n            Dashboard\n          "])," ",loggedIn?_h("router-link",{staticClass:"nav-item is-active",attrs:{to:"/logout"}},["Log out"]):_e()," ",loggedIn?_e():_h("router-link",{staticClass:"nav-item is-active",attrs:{to:"/login"}},["Log in"])," ",_m(0)])])])])," "," ",_h("div",{staticClass:"hero-body",attrs:{id:"app"}},[_h("router-view",{staticClass:"view"})])," "," ",_m(1)])},staticRenderFns:[function(){with(this)return _h("span",{staticClass:"nav-item"},[_h("a",{attrs:{href:"https://github.com/MysoftPaas/confd"}},[_h("span",{staticClass:"icon"},[_h("i",{staticClass:"fa fa-github"})])," ",_h("span")])])},function(){with(this)return _h("div",{staticClass:"hero-foot"},[_h("nav",{staticClass:"tabs"},[_h("div",{staticClass:"container"},[_h("ul",[_h("li",{staticClass:"is-active"},[_h("a",["About"])])," ",_h("li",[_h("a",["confd"])])])])])])}]}}]);
//# sourceMappingURL=app.2eec5f99328ddd61cc47.js.map