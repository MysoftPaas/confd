<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>project</title>
  <meta name="description" content="confd console">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- FONT
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
  <!--<link href="//fonts.googleapis.com/css?family=Raleway:400,300,600" rel="stylesheet" type="text/css">-->
  <!-- CSS
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
<link rel="stylesheet" href="/static/normalize.min.css">
<link rel="stylesheet" href="/static/skeleton.min.css">
<link rel="stylesheet" href="/static/sweetalert.min.css">
<link rel="stylesheet" href="/static/style.css">
  <!-- Favicon
  –––––––––––––––––––––––––––––––––––––––––––––––––– -->
<link rel="icon" type="image/png" href="favicon.png">
<script src="/static/vue.min.js"></script>
<script type="text/javascript" src="/static/sweetalert.min.js"></script>
<script type="text/javascript" src="/static/vue-resource.min.js"></script>
<script src="/static/common.js"></script>
<script src="/static/project.js"></script>
<!-- This is auto-serving by the Iris, you don't need to have this file in your disk-->
<script src="/iris-ws.js" type="text/javascript"></script>
</head>
<body>
    <div class="container" id="container">
        <div class="row">
            <h4>{{project.Name}}</h4>
        </div>
        <div class="row" style="border-bottom:1px solid #000; margin-bottom:40px;">
            <div class="four columns">
                <label for="prefix">Prefix</label>
                <div class="u-full-width">{{project.Prefix}}</div>
            </div>
            <div class="eight columns">
                <label for="key">ConfDir</label>
                <div class="u-full-width">{{project.ConfDir}}</div>
            </div>
        </div>
        <form style="margin-bottom:0!important;">
            <div class="row">
                <div class="four columns">
                    <label for="key">Key</label>
                    <input class="u-full-width" type="text" name="key" id="key" v-model="selectedItem.key" placeholder="Key"/>
                </div>
                <div class="eight columns">
                    <label for="key">Value</label>
                    <input class="u-full-width" type="text" name="value" id="vaue" v-model="selectedItem.value" placeholder="value"/>
                </div>
            </div>
            <div class="row" style="margin-top:0!important;padding-top:0!important;">
                <input value="SET" class="button-primary four columns" type="button" id="btnSet" @click="set(selectedItem)"/>
                <input value="DELETE" class="button four columns" type="button" id="btnDelete"  @click="delete(selectedItem.key)"/>
                <input value="Execute" class="button four columns" type="button" style="background-color:#21BA45!important;color:#fff!important;" @click="exec()">
            </div>
        </form>
        <div class="row">
            <div class="u-full-width">
                <a href="javascript:void(0);" @click="hide()">{{ hidden ? "Show log" : "Hide log" }}</a>
                <a href="javascript:void(0);" @click="clean()">Clean log</a>
            </div>
            <div v-html="loggingBody " class="u-full-width" id="loggingBody" v-if="!hidden">
            </div>
        </div>
        <div class="row">
            <table class="u-full-width">
                <thead>
                    <tr>
                        <th>key</th>
                        <th>value</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr v-for="value in items" @click="select($key, value)" v-on:mouseover="mouseover" v-on:mouseout="mouseout">
                        <td>{{$key}}</td>
                        <td>{{ value }}</td>
                        <td>
                            <a href="javascript:void();" @click="delete($key)">delete</a>
                            <a href="javascript:void();" @click="select($key, value)" style="margin-left:20px;">choose</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
<script type="text/javascript" charset="utf-8">
    config.init();
    var HOST = window.location.host;
    var app = app('container');
	ws = new Ws("ws://" + HOST + "/log");
    ws.OnConnect(function () {
        app.$data.loggingBody = "Websocket connection enstablished.";
    });

    ws.OnDisconnect(function () {
        app.$data.loggingBody = "Websocket disconnection.";
    });

    ws.On("log", function (message) {
        app.$data.loggingBody += message + "</br>\r\n";
    });
    function viewLog() {
        ws.Emit("log", "history");
    }
</script>
</body>
</html>
